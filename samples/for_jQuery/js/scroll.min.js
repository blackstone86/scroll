var ScrollEmulate=function(a){var b=this,a="#"+a+" ";b.wrap=$(a),b.cnt=$(a+".j_cntbox"),b.scrollbar=$(a+".j_bar"),b.scrollbtn=$(a+".j_point"),b.scrollbtnOffsetLimit=[],b.cntOffsetLimit=[],b.pointX=0,b.pointY=0,b.cntCurrOffset=0,b.scrollbtnCurrOffset=0,b.isVariableContent=!0,b.cntHeight=b.cnt.height(),setTimeout(function(){b.work(),b.isVariableContent&&b.initWhenContentChange()},350)};ScrollEmulate.prototype={has3d:"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozTransition"in document.createElement("DIV").style,hasTouch:"ontouchstart"in window,browser:function(){var a=navigator.userAgent.toLowerCase();return{isIE:/trident/.test(a),isFirefox:/firefox/.test(a),isWebkit:/webkit/.test(a)}}(),eventFix:function(){var a="ontouchstart"in window,b=navigator.userAgent.toLowerCase(),c=/firefox/.test(b);return{click:a?"touchstart":"click",mousedown:a?"touchstart":"mousedown",mousemove:a?"touchmove":"mousemove",mouseup:a?"touchend":"mouseup",mousewheel:c?"DOMMouseScroll":"mousewheel"}}(),cssFix:function(){var a=navigator.userAgent.toLowerCase(),b=/webkit/.test(a);return{transform:b?"-webkit-transform":"transform"}}(),isWheelDown:function(a){var b=this,c=!1,d=b.browser;return c=d.isFirefox?a.detail>0?!0:!1:a.wheelDelta<0?!0:!1},getTranslateY:function(a){var d=a.css("transform"),e=d.split(","),f=e.length;return parseInt(e[f-1],10)},setScrollBtnHeight:function(){var e,a=this,b=a.cnt.height(),c=a.wrap.height(),d=b>c;d?(e=parseInt(Math.pow(c,2)/b,10),a.scrollbtn.css("height",e)):a.scrollbar.hide()},pos:function(a,b){var c=this,e=(c.browser,c.cssFix);c.has3d?a.css(e.transform,"translate3d(0,"+b+"px"+",0)"):a.css("top",b)},getCurrOffset:function(a){var d,b=this,c=0;return b.has3d?c=b.getTranslateY(a):(d=a.css("top"),c=parseInt(d.substring(0,d.length-2),10)),c},setScrollBtnPos:function(a){var b=this,c=b.scrollbtnCurrOffset;c+=a,c<=b.scrollbtnOffsetLimit[0]?c=b.scrollbtnOffsetLimit[0]:c>=b.scrollbtnOffsetLimit[1]&&(c=b.scrollbtnOffsetLimit[1]),b.setScrollCntPos_ByScrollBtn(c),b.pos(b.scrollbtn,c)},setScrollCntPos_ByScrollBtn:function(a){var b=this,c=b.cntCurrOffset;c=-(a/b.wrap.height())*b.cnt.height(),c<=b.cntOffsetLimit[0]?c=b.cntOffsetLimit[0]:c>=b.cntOffsetLimit[1]&&(c=b.cntOffsetLimit[1]),b.pos(b.cnt,c)},setScrollCntPos:function(a){var b=this,c=b.cntCurrOffset;c+=a,c<=b.cntOffsetLimit[0]?c=b.cntOffsetLimit[0]:c>=b.cntOffsetLimit[1]&&(c=b.cntOffsetLimit[1]),b.setScrollBtnPos_ByScrollCnt(c),b.pos(b.cnt,c)},setScrollBtnPos_ByScrollCnt:function(a){var b=this,c=b.scrollbtnCurrOffset;c=-(a*b.wrap.height())/b.cnt.height(),c<=b.scrollbtnOffsetLimit[0]?c=b.scrollbtnOffsetLimit[0]:c>=b.scrollbtnOffsetLimit[1]&&(c=b.scrollbtnOffsetLimit[1]),b.pos(b.scrollbtn,c)},setPos:function(a){var b=this,c=b.hasTouch;c?b.setScrollCntPos(a):b.setScrollBtnPos(a)},mousedown:function(a){var b=this,a=b.hasTouch?a.touches[0]:a,c=b.eventFix,d=b.hasTouch,e=b.browser;b.directionLocked=!1,b.pointX=e.isIE?a.clientX:a.pageX,b.pointY=e.isIE?a.clientY:a.pageY,b.cntCurrOffset=b.getCurrOffset(b.cnt),b.scrollbtnCurrOffset=b.getCurrOffset(b.scrollbtn),$(document).bind(c.mousemove,function(a){return function(b){d||b.preventDefault(),a.mousemove.call(a,b.originalEvent)}}(b)),$(document).bind(c.mouseup,function(a){return function(b){d||b.preventDefault(),a.mouseup.call(a,b.originalEvent)}}(b))},mousemove:function(a){var b=this,a=b.hasTouch?a.touches[0]:a,c=b.browser,e=((c.isIE?a.clientX:a.pageX)-b.pointX,(c.isIE?a.clientY:a.pageY)-b.pointY);b.setPos(e)},mouseup:function(){var a=this,b=a.eventFix;$(document).unbind(b.mousemove),$(document).unbind(b.mouseup)},initOffset:function(a){var b=this,c=b.cssFix,d=isNaN(a)?0:a;b.has3d?0!=d?(b.scrollbtn.css(c.transform,"translate3d(0, "+d+"px, 0)"),b.setScrollCntPos_ByScrollBtn(d)):(b.cnt.css(c.transform,"translate3d(0, 0, 0)"),b.scrollbtn.css(c.transform,"translate3d(0, 0, 0)")):0!=d?(b.scrollbtn.css("top",d),b.setScrollCntPos_ByScrollBtn(d)):(b.cnt.css("top",0),b.scrollbtn.css("top",0))},mousewheel:function(a){var b=this;b.cntCurrOffset=b.getCurrOffset(b.cnt),b.scrollbtnCurrOffset=b.getCurrOffset(b.scrollbtn),b.isWheelDown(a)?b.setPos(40):b.setPos(-40)},init:function(a){var b=this;b.setScrollBtnHeight(),b.scrollbtnOffsetLimit=[0,b.wrap.height()-b.scrollbtn.height()],b.cntOffsetLimit=[b.wrap.height()-b.cnt.height(),0],b.initOffset(a)},initWhenContentChange:function(){var a=this;setInterval(function(){var c,b=a.cnt.height();b!=a.cntHeight&&(c=a.getCurrOffset(a.scrollbtn),a.init(c),a.cntHeight=b)},500)},work:function(){var a=this,b=a.hasTouch,c=a.eventFix;a.init(),a.hasTouch?a.cnt.bind(c.mousedown,function(a){return function(c){b||c.preventDefault(),a.mousedown.call(a,c.originalEvent)}}(a)):(a.scrollbtn.bind(c.mousedown,function(a){return function(c){b||c.preventDefault(),a.mousedown.call(a,c.originalEvent)}}(a)),a.wrap.bind(c.mousewheel,function(a){return function(c){b||c.preventDefault(),a.mousewheel.call(a,c.originalEvent)}}(a)))}},$.fn.toScrollBar=function(){var a=this.attr("id");return new ScrollEmulate(a),this};