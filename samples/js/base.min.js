if(!Function.prototype.bind){Function.prototype.bind=function(e){var t=[].slice,n=this,r=t.call(arguments,1),i=function(){if(this instanceof i){var o,a,s=function(){};s.prototype=n.prototype;o=new s;a=n.apply(o,r.concat(t.call(arguments)));return(typeof a=="object"||typeof a=="function")&&a!==null?a:o}return n.apply(e,r.concat(t.call(arguments)))};return i}}if(!Array.prototype.forEach){Array.prototype.forEach=function(e,t){if(!e||e.constructor!=Function.toString())return;t=t||window;for(var n=0,r=this.length;n<r;n++){e.call(t,this[n],n,this)}}}if(!Array.prototype.filter){Array.prototype.filter=function(e,t){if(!e||e.constructor!=Function.toString())return;t=t||window;var n=[];for(var r=0,i=this.length;r<i;r++){if(e.call(t,this[r],r,this))n.push(this[r])}return n}}if(!Array.prototype.map){Array.prototype.map=function(e,t){if(!e||e.constructor!=Function.toString())return;t=t||window;var n=[];for(var r=0,i=this.length;r<i;r++){n.push(e.call(t,this[r],r,this))}return n}}if(!Array.prototype.every){Array.prototype.every=function(e,t){if(!e||e.constructor!=Function.toString())return;t=t||window;for(var n=0,r=this.length;n<r;n++){if(!e.call(t,this[n],n,this))return false}return true}}if(!Array.prototype.some){Array.prototype.some=function(e,t){if(!e||e.constructor!=Function.toString())return;t=t||window;for(var n=0,r=this.length;n<r;n++){if(e.call(t,this[n],n,this))return true}return false}}function compare(e,t){if(e==null||t==null)return e===t;return e==t&&e.constructor.toString()==t.constructor}Array.prototype.indexOf=function(e){for(var t=0,n=this.length;t<n;t++){if(compare(this[t],e))return t}return-1};Array.prototype.lastIndexOf=function(e){for(var t=this.length-1;t>=0;t--){if(compare(this[t],e))return t}return-1};if(!String.prototype.trim){var trimBeginRegexp=/^\s+/;var trimEndRegexp=/\s+$/;String.prototype.trim=function(){return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}if(typeof document.getElementsByClassName!="function"){document.getElementsByClassName=function(e){var t=document;var n=t.getElementsByTagName("*");var r=new RegExp("\\b"+e+"\\b");var i=[];for(var o=0,a=n.length;o<a;o++){var s=n[o].className;if(r.test(s)){i.push(n[o])}}return i}}if(typeof document.querySelectorAll!="function"){var s=document.createStyleSheet();document.querySelectorAll=function(e,t,n,r,i){i=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(",");for(n=e.length;n--;){s.addRule(e[n],"k:v");for(r=i.length;r--;)i[r].currentStyle.k&&t.push(i[r]);s.removeRule(0)}return t.reverse()}}String.prototype.toNum=function(){var e=/^-*\d+/,t=String(this).match(e)[0];return t==null?0:parseFloat(t)};Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()>12?this.getHours()-12:this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};if(/(y+)/.test(e)){var r=4-RegExp.$1.length,i=(this.getFullYear()+"").substr(r);e=e.replace(RegExp.$1,i)}if(/(E+)/.test(e)){var i,o=+n[this.getDay()+""];if(RegExp.$1.length>1){if(RegExp.$1.length>2){o="星期"}else{o="周"}}else{o=""}i=o+n[this.getDay()+""];e=e.replace(RegExp.$1,i)}for(var a in t){if(RegExp("("+a+")").test(e)){var i;if(1==RegExp.$1.length){i=t[a]}else{var r=(""+t[a]).length;i=("00"+t[a]).substr(r)}e=e.replace(RegExp.$1,i)}}return e};var DS,Q;DS=function(){var e,t,n;n=[].slice;t=[];e=function(t){var n;n=e.getDOMObject(t);return Q(n)};Q=function(t){if(e.isObjArray(t)){return t}for(var n in Q.prototype){t[n]=Q.prototype[n]}return t};e.extend=function(e){n.call(arguments,1).forEach(function(t){var n,r;r=[];for(n in t){r.push(e[n]=t[n])}return r});return e};Q.prototype=e.fn={};return e}();window.DS=DS;"nmg"in window||(window.nmg=DS);nmg.support=function(){"use strict";var e,t=document.createElement("div"),n=document.createElement("input");t.setAttribute("className","t");var r=function(){var e=document.documentElement.style,t="perspective",n="Webkit Moz O ms".split(" "),r=t.charAt(0).toUpperCase()+t.substr(1),i=(r+" "+n.join(r+" ")+r).split(" "),o=null;for(var a=0,s=i.length;a<s;a++){if(i[a]in e){o=i[a];break}}return!!o};e={getSetAttribute:t.className!=="t",hasOnInput:typeof n.oninput=="object",hasTouch:"ontouchstart"in window,has3d:r()};return e}();nmg.browser=function(){"use strict";var e=navigator.userAgent.toLowerCase(),t=/opera/i.test(e),n=/android/i.test(e),r=navigator.appVersion.indexOf("UC")!=-1,i=/meego/i.test(e),o=/windows phone os/i.test(e),a=/mac os/i.test(e);return{ua_lowerCase:e.toLowerCase(),isIPad:/ipad/i.test(e),isIPhoneOrIPod:/iphone/i.test(e)||/ipod/i.test(e),isNexus7:window.devicePixelRatio==1.3312499523162842,isIOS:a,isAndroid:n,isWP:o,isMeeGo:i,isUC:r,isOpera:t,isIE:/msie/i.test(e),isChrome:/chrome/i.test(e),isAndroidOriginalBrowser:n&&!r&&!t,isDesktop:!o&&!a&&!n&&!i&&!/opera mobi/i.test(e),isSamSungPad:window.devicePixelRatio==1&&!a,isFirefox:/firefox/.test(e),isWebkit:/webkit/.test(e),isHeightPR:"devicePixelRatio"in window&&window.devicePixelRatio>1}}();nmg.screen=function(){"use strict";return function(){return{getWidth:function(){return typeof window.innerWidth!="undefined"?window.innerWidth:document.getElementsByTagName("html")[0].clientWidth},getHeight:function(){return typeof window.innerHeight!="undefined"?window.innerHeight:document.getElementsByTagName("html")[0].clientHeight}}}()}();var arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,_forEach=arr.forEach,_map=arr.map,propFix={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},vendor=nmg.browser.isWebkit?"webkit":nmg.browser.isFirefox?"Moz":nmg.browser.isOpera?"O":nmg.browser.isIE?"ms":"",eventFix={click:nmg.support.hasTouch?"touchstart":"click",resize:"onorientationchange"in window?"orientationchange":"resize",mousedown:nmg.support.hasTouch?"touchstart":"mousedown",mousemove:nmg.support.hasTouch?"touchmove":"mousemove",mouseup:nmg.support.hasTouch?"touchend":"mouseup",mousewheel:nmg.browser.isFirefox?"DOMMouseScroll":"mousewheel",transitionend:nmg.browser.isWebkit?"webkitTransitionEnd":nmg.browser.isFirefox?"transitionend":nmg.browser.isOpera?"otransitionend":nmg.browser.isIE?"MSTransitionEnd":"",input:nmg.support.hasOnInput?"input":"propertychange"},cssFix={transitionduration:vendor+"TransitionDuration",transform:vendor+"Transform",translate:vendor+"Transform",perspective:vendor+"Perspective"},mouseButton={button:{left:0,center:nmg.browser.isIE?4:1,right:2}},getSetAttribute=nmg.support.getSetAttribute;try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(e){var t,n=[];for(;t=this[e];e++){n.push(t)}return n}}(function(e){"use strict";var t,n,r,i,o,a,s,l,c,u,f,d,h,p;t=Object.prototype;n=/^\.([\w-]+)$/;r=/^#[\w\d-]+$/;i=/^[\w-]+$/;o=/^\s*<(\w+|!)[^>]*>/;a=document.createElement("div");s=function(e,t){var n;n=t.split(/\s+/);return n.indexOf(e)>=0};l=function(t,n){var r=(t.currentStyle?t.currentStyle:window.getComputedStyle(t,null))[n];if(r=="auto"||r.indexOf("%")>1){switch(n){case"width":if(e.browser.isIE){r=t.offsetWidth+"px"}else{r=t.clientWidth+"px"}break;case"height":if(e.browser.isIE){r=t.offsetHeight+"px"}else{r=t.clientHeight+"px"}break;default:break}}return r};c=function(e){var t,n=[],r=[1,9,11];t=[];push.apply(n,slice.call(e,0));_forEach.call(n,function(e){if(typeof e.nodeType!="undefined"&&r.indexOf(e.nodeType)>=0){t.push(e)}});return t};e.toType=function(e){return t.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()};e.isObjArray=function(e){if(!!e&&typeof e.append=="function"){return true}return false};e.fn.closest=function(e){var t=[],e=e.toUpperCase();_forEach.call(this,function(n){while(n.parentNode.tagName!==e){n=n.parentNode}t.push(n.parentNode)});t.prevObject=this;return Q(t)};e.query=function(e){var t;e=e.trim();if(n.test(e)){return c(document.getElementsByClassName(e.replace(/^./,"")))}else if(r.test(e)){return[document.getElementById(e.replace(/^#/,""))]}else if(i.test(e)){return c(document.getElementsByTagName(e))}else{return c(document.querySelectorAll(e))}};u=function(t,o){var a=[],s=function(e){return e.children.length>0},l=function(e){return t==e},c=this[0],u=function(e){l(e)&&c!=e&&a.push(e);if(s(e)){_forEach.call(e.children,function(e){u(e)})}};if(o=="string"){t=t.trim();if(n.test(t)){l=function(n){var r=!!e(n).attr("class")?e(n).attr("class").split(" "):[];for(var i=0;i<r.length;i++){if(r[i]==t.replace(/^./,"")){return true}}return false}}else if(r.test(t)){l=function(n){return e(n).attr("id")==t.replace(/^#/,"")}}else if(i.test(t)){l=function(e){return e.tagName.toLowerCase()==t.toLowerCase()}}}else if(o=="objs"){l=function(e){var n=false;_forEach.call(t,function(t){if(t==e){n=true}});return n}}_forEach.call(this,function(e){u(e)});return a};e.fn.end=function(){return this.prevObject};e.fn.find=function(t){var n,r,i;n=[1,3,9,11];r=e.toType(t);if(r==="string"){i=u.call(this,t,"string")}else if(n.indexOf(t.nodeType)>=0){i=u.call(this,t,"obj")}else if(e.isObjArray(t)){i=u.call(this,t,"objs")}i.prevObject=this;return Q(i)};p=function(t){for(var n in e.fn){t[n]=e.fn[n]}return t};h=function(e){var t=this.length,n=+e+(e<0?t:0);var r=n>=0&&n<t?[this[n]]:[];return p(r)};e.fn.first=function(){var e=h.call(this,0);e.prevObject=this;return e};e.fn.last=function(){var e=h.call(this,-1);e.prevObject=this;return e};e.fn.eq=function(e){var t=h.call(this,e);t.prevObject=this;return t};e.getDOMObject=function(t){var n,r,i;n=[1,3,9,11];r=e.toType(t);if(r==="string"&&o.test(t)){i=e.fragment(t)}else if(r==="string"){i=e.query(t)}else if(n.indexOf(t.nodeType)>=0||t===window){i=[t]}else if(e.isObjArray(t)){return t}else if(r==="htmlcollection"||typeof t.length=="number"){return c(t)}return i};e.fragment=function(e){var t=a;t.innerHTML=e.trim();return _map.call(t.childNodes,function(e,n,r){return t.removeChild(e)})};e.fn.clone=function(){var e=this.map(function(e){return e.cloneNode(true)});return p(e)};e.fn.before=function(t){_forEach.call(this,function(n){var r=n.parentNode;for(var i=0;i<e(t).length;i++){r.insertBefore(e(t)[i],n)}})};e.fn.remove=function(){_forEach.call(this,function(e){var t=e.parentNode;t.removeChild(e)})};e.fn.append=function(t){var n=e.isObjArray(t)?t:e(t);if(!!n&&n.length>0){_forEach.call(this,function(t,r){n=r>0?e(n).clone():n;_forEach.call(n,function(e){t.appendChild(e)})})}return this};e.fn.appendTo=function(t){e(t).append(this);return this};e.fn.hasClass=function(e){return s(e,this[0].className)};e.fn.addClass=function(e){_forEach.call(this,function(t){if(!s(e,t.className)){t.className+=" "+e;t.className=t.className.replace(/\s+/g," ").trim()}});return this};e.fn.removeClass=function(e){var t=arguments.length===0||typeof e==="string"&&e;e=e.match(/\S+/g);_forEach.call(this,function(n){if(t){if(!e){n.className=""}else{var r=n.className.split(/\s+/);e.forEach(function(e){if(s(e,n.className)){for(var t=0;t<r.length;t++){if(r[t]==e){delete r[t]}}}});n.className=r.join(" ").replace(/\s+/," ")}}});return this};e.fn.css=function(t,n){var r=/-([\da-z])/gi,i=/^-ms-/,o=function(e,t){return t.toUpperCase()},a=function(e){return e.replace(i,"ms-").replace(r,o)},s=e.support.has3d,n=t.toLowerCase()=="translate"&&n!=void 0&&n!="none"?"translate"+(s?"3d(":"(")+n+(s?",0)":")"):n,t=a(!!cssFix[t]?cssFix[t]:t);if(typeof n!=="undefined"){_forEach.call(this,function(e){e.style[t]=n})}else{var c=l(this[0],t);return this[0].style[t]||(c=="auto"||c==""?"0px":c)}return this};f=function(e){return typeof e=="number"?e+"px":typeof e=="string"?e:0};d=function(t,n){var r=n?"width":"height";if(t!=void 0){if(typeof t!="function"){this.css(r,f(t))}else{var i=0,o;_forEach.call(this,function(n){o=t(i,e(n).css(r));e(n).css(r,f(o));i++})}}else{return this.css(r)}return this};e.fn.width=function(e){return d.call(this,e,true)};e.fn.height=function(e){return d.call(this,e,false)};e.fn.show=function(){return this.css("display","block")};e.fn.hide=function(){return this.css("display","none")};e.fn.html=function(e){var t=this[0],n=typeof t.textContent!="undefined",r=t.nodeName.toLowerCase()=="script",i=typeof t.innerText!="undefined",o=arguments.length,a="";_forEach.call(this,function(t){if(o===0){if(n){a=t.textContent}else if(r){a=t.text}else if(i){a=t.innerText}}else if(typeof e==="number"||typeof e==="string"){if(n){t.textContent=e}else if(r){t.text=e}else if(i){t.innerText=e}}});if(o===0){return a}};e.fn.empty=function(){this.html("")};e.fn.attr=function(t,n){if(e.toType(t)==="string"&&n===void 0){var r=this[0];if(typeof r.getAttribute!="undefined"){if(t=="class"&&e.toType(r.attributes)=="object"){return!!r.attributes(t)&&r.attributes(t).nodeValue?r.attributes(t).nodeValue:""}else if(t=="href"){return r.getAttribute("href",2)}else{return r.getAttribute(t)}}}else{if(n===null){e.fn.removeAttr.call(this,t);return}_forEach.call(this,function(e){return e.setAttribute(t,n)})}return this};e.fn.removeAttr=function(e){var t=propFix[e]||e;_forEach.call(this,function(n){n.removeAttribute(getSetAttribute?e:t)});return this};e.fn.index=function(){if(this[0]&&this[0].parentNode){var e=this[0],t=e.parentNode.children;for(var n=0;n<t.length;n++){if(e===t[n]){return n}}}else{return-1}}})(DS);(function(e){"use strict";var t;e.extend=function(e,t){t=t||{};for(var n in t){e[n]=t[n]}return e}})(DS);(function(e){var t,n,r,i,o,a,s,l,c,u,f;n=1;t={};r=/complete|loaded|interactive/;e.fn.ready=function(t){var n=setTimeout;if(e.browser.isWebkit){setTimeout(function(){if(r.test(document.readyState)){t()}else{setTimeout(arguments.callee,10)}},10)}else if(e.browser.isFirefox&&!e.browser.isCompatible||e.browser.isOpera){e(document).bind("DOMContentLoaded",t)}else if(e.browser.isIE){(function(){var e=document.createElement("document:ready");try{e.doScroll("left");t();e=null}catch(r){n(arguments.callee,0)}})()}else{window.onload=t}};f=function(e){!!e.srcElement&&(e.target=e.srcElement);return e};i=function(t,n){var r;t=t;r=function(r){var i;r=f(r);i=t.apply(n,[r]);if(i===false){e.preventDefault(r)}return i};return r};o=function(e){return e._id||(e._id=n++)};a=function(n,r,a,s){var l,c,u;c=o(n);u=t[c]||(t[c]=[]);l={event:a,callback:s,proxy:i(s,r),index:u.length};u.push(l);return e.fn.addHandler(n,l.event,l.proxy)};s=function(e,n,r){return(t[e]||[]).filter(function(e){return e&&(!n||e.event===n)&&(!r||e.callback===r)})};l=function(n,r,i){var a;a=o(n);return s(a,r,i).forEach(function(r){delete t[a][r.index];return e.fn.removeHandler(n,r.event,r.proxy)})};c=function(e){var t=typeof eventFix[e]=="undefined"?e:eventFix[e];return t};u=function(e){var t=typeof e.handleEvent=="function";return{callback:t?e.handleEvent:e,target:t?e:undefined}};e.fn.bind=function(e,t){var n=u(t);e=c(e);_forEach.call(this,function(t,r){t._index=r;var i=!!n.target?n.target:t;a(t,i,e,n.callback)})};e.fn.unbind=function(e,t){var n=u(t);e=c(e);_forEach.call(this,function(t){l(t,e,n.callback)})};e.fn.addHandler=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}else{e["on"+t]=n}};e.fn.removeHandler=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}else{e["on"+t]=null}};e.preventDefault=function(e){if(e&&e.preventDefault)e.preventDefault();else window.event.returnValue=false};e.isWheelDown=function(t){var n=false;if(e.browser.isFirefox){if(t.detail>0){n=true}else{n=false}}else{if(t.wheelDelta<0){n=true}else{n=false}}return n}})(DS);(function(e){"use strict";var t,n,r,i,o,a,s,l,c,u;t={eain:function(e,t,n,r){return-n*(e/=r)*(e-2)+t}};n=function(e){var t=[];var n=null;for(n in e){var r={};var i=String(e[n]).match(/(-*\d+)($|([a-z]+))/);r.interval=null;r.style=n;r.val=typeof e[n]=="number"?e[n]:parseFloat(i[1]);r.px=i[3];t[t.length]=r}return t};r=window.getComputedStyle?function(e,t,n){if(n==undefined){t=t.replace(/([A-Z])/g,"-$1");t=t.toLowerCase();return window.getComputedStyle(e,null).getPropertyValue(t)}else{e.style[t]=n}}:function(e,t,n){if(n==undefined){if(t=="opacity"){return e.style.filter.indexOf("opacity=")>=0?parseFloat(e.style.filter.match(/opacity=([^)]*)/)[1])/100:"1"}else{return e.currentStyle[t]=="auto"?0:e.currentStyle[t]}}else{if(t=="opacity"){e.style.filter=(e.filter||"").replace(/alpha\([^)]*\)/,"")+"alpha(opacity="+n*100+")"}else{e.style[t]=n}}};o=function(e,n,i,o,a,s,l){s=s||"";var c=parseFloat(r(e,n))||0;i=i-c;var u=(new Date).getTime();var f=setInterval(function(){var l=(new Date).getTime()-u;if(l>a){l=a;clearInterval(f);o&&o(e)}r(e,n,parseFloat(t.eain(l,c,i,a))+s,2)},10);return f};a=function(e){var t=e._animateConfig;if(t.delay){setTimeout(function(){a(e)},t.delay);e._animateConfig.delay=0;return e}var n=t.callBack;var r=t.time;var i=0;var s=0;var l=t.jsonMap.length;var c=function(){if(++s==l){n&&n(e)}};for(;i<l;i++){var u=t.jsonMap[i].style,f=t.jsonMap[i].val,d=t.jsonMap[i].px;e._animateConfig.jsonMap[i].interval=o(e,u,f,n,r,d,c)}return e};e.speeds={slow:600,fast:200,_default:400};e.getTime=function(t){var n;n=e.speeds["_default"];if(typeof t=="string"){typeof e.speeds[t]!="undefined"&&(n=e.speeds[t])}else if(typeof t=="number"){n=t}return n};e.fn.animate=function(t,r,i){typeof r=="function"&&(i=r);_forEach.call(this,function(o,s,l){o["_animateConfig"]={delay:0,jsonMap:n(t),time:e.getTime(r),callBack:i&&i.bind(o)};o=a(o)});return this};e.fn.fadeIn=function(t,n){this.css("opacity",0);this.show();typeof t=="function"&&(n=t);e.fn.animate.call(this,{opacity:"1"},e.getTime(t),n)};e.fn.fadeOut=function(t,n){typeof t=="function"&&(n=t);e.fn.animate.call(this,{opacity:"0"},e.getTime(t),n)}})(DS);(function(e){"use strict";var t=300,n=function(n,r){var i=e(this),o=this;i.addClass(n).removeClass("out").addClass("in");if(r!=void 0&&typeof r=="function"){setTimeout(function(){r.call(o)},t)}},r=function(n,r){var i=e(this),o=this;i.addClass(n).removeClass("in").addClass("out");if(r!=void 0&&typeof r=="function"){setTimeout(function(){r.call(o)},t)}};e.fn.fadeIn=function(e){_forEach.call(this,function(t){n.call(t,"fade",e)})};e.fn.fadeOut=function(e){_forEach.call(this,function(t){r.call(t,"fade",e)})};e.fn.popIn=function(e){_forEach.call(this,function(t){n.call(t,"pop",e)})};e.fn.popOut=function(e){_forEach.call(this,function(t){r.call(t,"pop",e)})};e.fn.slideIn=function(e){_forEach.call(this,function(t){n.call(t,"slide",e)})};e.fn.slideOut=function(e){_forEach.call(this,function(t){r.call(t,"slide",e)})};e.fn.slidefadeIn=function(e){_forEach.call(this,function(t){n.call(t,"slidefade",e)})};e.fn.slidefadeOut=function(e){_forEach.call(this,function(t){r.call(t,"slidefade",e)})};e.fn.slidedownIn=function(e){_forEach.call(this,function(t){n.call(t,"slidedown",e)})};e.fn.slidedownOut=function(e){_forEach.call(this,function(t){r.call(t,"slidedown",e)})};e.fn.slideupIn=function(e){_forEach.call(this,function(t){n.call(t,"slideup",e)})};e.fn.slideupOut=function(e){_forEach.call(this,function(t){r.call(t,"slideup",e)})};e.fn.flipIn=function(t){e(document.body).addClass("viewport");_forEach.call(this,function(e){n.call(e,"flip",t)})};e.fn.flipOut=function(t){e(document.body).addClass("viewport");_forEach.call(this,function(e){r.call(e,"flip",t)})};e.fn.turnIn=function(t){e(document.body).addClass("viewport");_forEach.call(this,function(e){n.call(e,"turn",t)})};e.fn.turnOut=function(t){e(document.body).addClass("viewport");_forEach.call(this,function(e){r.call(e,"turn",t)})};e.fn.flowIn=function(e){_forEach.call(this,function(t){n.call(t,"flow",e)})};e.fn.flowOut=function(e){_forEach.call(this,function(t){r.call(t,"flow",e)})}})(DS);var IndexedDB_Config={dbVersion:1,photoURLs:[]};(function(e){"use strict";e.hideAddressBar=function(){window.onload=function(){setTimeout(function(){window.scrollTo(0,0)},0)}};e.getOriginalWidthOfImg=function(t){var n=new Image;n.src=e(t).attr("src");return n.width};e.getOriginalHeightOfImg=function(t){var n=new Image;n.src=e(t).attr("src");return n.height};e.importJs=function(e,t,n){var r=document.createElement("script");r.src=e;if(!!n){r.charset=n}r.onload=function(){var e=this;e.onload=e.onerror=null;e.parentNode.removeChild(e);if(!!t){t(true)}};r.onerror=function(){var e=this;e.onload=e.onerror=null;e.parentNode.removeChild(e);if(!!t){t(false)}};document.head.appendChild(r)};e.cookie={hasUnits:/[smhdMy]$/,toSeconds:{s:1,m:60,h:3600,d:86400,M:2592e3,y:31536e3},encoder:window.encodeURIComponent,decoder:window.decodeURIComponent,get:function(t){var n=e.cookie;t=n.encoder(t)+"=";var r,i=document.cookie,o;o=i.indexOf(t);if(-1===o){return undefined}else{o+=t.length;r=i.indexOf(";",o);if(-1===r){r=i.length}return n.decoder(i.substring(o,r))}},set:function(t,n,r,i){var o=e.cookie,a=[o.encoder(t)+"="+o.encoder(n)];if(r){var s,l;if("date"===e.toType(r)){s=r}else{if("string"==typeof r&&o.hasUnits.test(r)){r=r.substring(0,r.length-1);l=RegExp.lastMatch}if(!isNaN(r)){s=new Date;s.setTime(s.getTime()+1e3*r*o.toSeconds[l||"m"])}}if(s){a.push("expires="+s.toUTCString())}}if(i){a.push("secure")}document.cookie=a.join(";")},del:function(t){var n=e.cookie;document.cookie=n.encoder(t)+"="}};e.storage={storage:window.localStorage,hasStorage:!!window.localStorage,SIZE:50,getNewItemIndex:function(){var e=this;if(e.hasStorage){if(!window.localStorage.index){try{window.localStorage.index=0}catch(t){alert(t);return null}}return window.localStorage.index}else{return null}},keyValueIndexObj:function(){if(!!window.localStorage){if(!!window.localStorage.map){return JSON.parse(window.localStorage.map)}else{return{}}}else{return null}}(),removeAll:function(){var e=this,t=e.storage;if(e.hasStorage){t.clear();e.keyValueIndexObj={};t.map="{}"}},removeItem:function(e){var t=this,n=t.storage;if(t.hasStorage){n.removeItem(t.keyValueIndexObj[e]);delete t.keyValueIndexObj[e];n.map=JSON.stringify(t.keyValueIndexObj)}},removeOldValueIndex:function(e){var t=this,n=t.storage,r=t.keyValueIndexObj,i=0,o;for(var a in r){if(r[a]==e){i++;if(i==1){o=a}else if(i==2){delete r[o];break}}}n.map=JSON.stringify(r)},save:function(e,t){var n=this,r=n.keyValueIndexObj,i=n.storage,o=n.getNewItemIndex();if(i&&o!==null){if(e&&r[e]){i.setItem(r[e],t)}else{i.setItem(o,t);if(e){r[e]=o;i.map=JSON.stringify(r);n.removeOldValueIndex(o)}if(++o===n.SIZE){o=0}i.index=o}}},getItem:function(e){var t=this,n=t.keyValueIndexObj,r=t.storage,i=t.getNewItemIndex();if(r&&null!==i&&e){return r.getItem(n[e])}else{return undefined}}};e.indexedDB={indexedDB:window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,IDBTransaction:window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,URL:window.URL||window.webkitURL,isNeedGetAgain:false,request:{},config:IndexedDB_Config,Utils:{errorHandler:function(e){return function(t){if(e){e(t)}else{throw new Error("没有定义出错时的回调函数")}}},request:function(e,t,n){var r=this;if(t){e.onsuccess=function(e){t(e)}}e.onerror=r.errorHandler(n)}},removeDatabase:function(){var e=this;e.indexedDB.deleteDatabase("database_hjw");console.log("成功移除IndexedDB数据库所有数据表")},clear:function(e,t){var n=this;var r=e.transaction([],n.IDBTransaction.READ_WRITE);if(e.objectStoreNames.contains(t)){var i=r.objectStore(t).clear();i.onsuccess=function(e){console.log("成功清除IndexedDB数据库中指定数据表的所有数据")}}else{console.log("IndexedDB数据库中不存在指定数据表")}},db:{},createObjectStore:function(e){var t=this;console.log("正在创建数据表");if(!e.objectStoreNames.contains("table_hjw")){e.createObjectStore("table_hjw");var n=e.objectStoreNames.contains("table_hjw");if(n){console.log("table_hjw 数据表创建成功")}}else{console.log("table_hjw 数据表已经存在")}},getPhotoSRCs_work:function(e){var t=this,n=IndexedDB_Config.photoURLs,r,i=0,o="table_hjw",a={};r=t.db.transaction([o],t.IDBTransaction.READ_WRITE);var s=r.objectStore(o);for(var l=0;l<n.length;l++){var c=n[l];t.Utils.request(s.get(c),function(r){return function(o){console.log("從indexedDB 获取 "+r+" 图片成功!");i++;var s=o.target.result;a[r]=t.URL.createObjectURL(s);if(i==n.length){e(a)}}}(c),function(t){return function(){console.log("從indexedDB 获取 "+t+" 图片失敗!");i++;a[t]=null;if(i==n.length){e(a)}}}(c))}},getPhotos:function(e){var t=this,n={},r=IndexedDB_Config.photoURLs,i=0;for(var o=0;o<r.length;o++){var a=new XMLHttpRequest,s=r[o];a.open("GET",s,true);a.responseType="blob";a.addEventListener("load",function(t,o){return function(){if(o.status===200){console.log("获取 "+t+" 图片");var a=o.response;console.log("Blob : "+a);i++;n[t]=a}else{i++;n[t]=null;console.log("获取 "+t+" 图片失败")}if(i==r.length){e(n)}}}(s,a),false);a.send()}},save:function(e,t){var n=this,r,i=IndexedDB_Config.photoURLs;console.log("正在将图片保存到IndexedDB数据库");r=n.db.transaction(["table_hjw"],n.IDBTransaction.READ_WRITE);var o=r.objectStore("table_hjw");n.Utils.request(o,null,function(e){console.log("獲取數據表操作异常")});for(var a=0;a<i.length;a++){var s=i[a];o.put(e[s],s)}console.log("保存完畢");if(typeof t=="function"){t()}},savePhotos:function(e){var t=this,n=IndexedDB_Config.photoURLs;if(t.isNeedGetAgain){t.getPhotos(function(n){t.save(n,e)})}else{e()}},openDatabase:function(t,n){var r=this;r.config=IndexedDB_Config;r.Utils.request(r.request=r.indexedDB.open("database_hjw",r.config.dbVersion,2e3),function(e){console.log("成功打开 或 创建 IndexedDB 数据库");r.Utils.request(r.db=r.request.result,null,function(e){console.log("打开 或 创建 IndexedDB 数据库 失败")});r.savePhotos(function(){if(typeof t=="function"){t(n)}})},function(e){console.log("打开 或 创建 IndexedDB 数据库 失败")});r.request.onupgradeneeded=function(t){console.log("您当前 indexedDB版本号 为 ： "+t.target.result.version+"，发现有更新版本！");e.indexedDB.isNeedGetAgain=true;r.createObjectStore(t.target.result)}},getPhotoSRCs:function(e){var t=this;t.openDatabase(t.getPhotoSRCs_work.bind(t),e)}}})(DS);(function(e){"use strict";var t;e.fn.tolang=function(t,n){var r="#"+this.attr("id")+" ",i=e("#"+t);if(n==void 0){var o=e(r+"a"),a=o.length==3?["tc","sc","en"]:["tc","en"];i.addClass("tc");o.bind("click",function(){e(r+".curr").removeClass("curr");e(this).addClass("curr");i.removeClass("tc sc en");i.addClass(a[this._index])})}else if(n=="toggle"){var s=e(e(r+"a")[0]),l=e(e(r+"a")[1]);l.hide();i.addClass("tc");s.bind("click",function(){e(this).hide();l.show();i.removeClass("tc en");i.addClass("en")});l.bind("click",function(){e(this).hide();s.show();i.removeClass("tc en");i.addClass("tc")})}return this};e.fn.toScrollBar=function(){var e=this.attr("id");if(typeof ScrollEmulate!="undefined"){new ScrollEmulate(e)}else{alert("請引用base_scrollbar.js !")}return this};e.fn.toSlideBox=function(t){var n="#"+this.attr("id")+" ",r=e.getTime(t),i=e(n+".j_slidebox_list"),o=e(n+" .j_slidebox_nav a").length,a=e(n+" .j_slidebox_item").css("width").toNum(),s=a*o;i.css("width",s+"px");e(n+".j_slidebox_nav a").bind("click",function(t){e(n+" .curr").removeClass("curr");e(this).addClass("curr");i.animate({left:-this._index*a+"px"},r)});return this};e.fn.toPageList=function(t,n){var r,i,o=document.createDocumentFragment(),a,s,l;a=function(){var t=document.createElement("h1");e(t).html("文件列表");return t};s=function(){var t=document.createElement("a");e(t).attr("target","_blank");return t};l=function(t){var n;n=s();e(n).attr("href",t);e(n).html(t);o.appendChild(n)};o.appendChild(a());if(e.toType(t)=="array"){t.forEach(function(e){r=e+".html";l(r)})}else{for(var c=1;c<t+1;c++){i="p"+c+"_";for(var u=0;u<n.length;u++){r=i+n[u]+".html";l(r)}}}this[0].appendChild(o);this.addClass("j_pageList");return this};e.fn.toTextArea=function(){this.find("textarea").bind("input",function(t){var n=this.value.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),r=e(this.parentNode).find(".j_bg");r[0].innerHTML=n.replace(/#([^#]*)#/g,"<span class='j_spanbg'>#$1#</span>")})}})(DS);